plugins {
    id 'io.micronaut.build.internal.docs'
    id 'io.micronaut.build.internal.quality-reporting'
}

repositories {
    mavenCentral()
    maven { url "https://s01.oss.sonatype.org/content/repositories/snapshots/" }
}

def prepareGuideHotfix = tasks.register('prepareGuideHotfix') {
    doLast {
        new File(buildDir, 'doc-resources').mkdirs()
    }
}

tasks.named('publishGuide') {
    dependsOn(prepareGuideHotfix)
    dependsOn(tasks.javadoc)
}
configurations.all {
    resolutionStrategy {
        preferProjectModules()
    }
}
